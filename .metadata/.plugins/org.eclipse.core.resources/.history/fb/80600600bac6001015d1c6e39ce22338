// 1. 验证登录表单（用户名/密码非空，格式初步检查）
function checkLoginForm() {
    let username = document.getElementById("username").value.trim();
    let password = document.getElementById("password").value.trim();

    // 验证非空
    if (username === "" || password === "") {
        alert("用户名和密码不能为空！");
        return false;
    }

    // 验证格式（与后端正则一致）
    let regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d.*\d)(?=.*[a-zA-Z].*[a-zA-Z]).{8,}$/;
    if (!regex.test(username)) {
        alert("用户名格式错误（≥8字符，含2字母、2数字、1大小写）！");
        return false;
    }
    if (!regex.test(password)) {
        alert("密码格式错误（≥8字符，含2字母、2数字、1大小写）！");
        return false;
    }

    // 验证通过，允许提交
    return true;
}

// 2. 验证注册表单（同登录表单，新增姓名/学号非空）
function checkRegisterForm() {
    let username = document.getElementById("username").value.trim();
    let password = document.getElementById("password").value.trim();
    let name = document.getElementById("name").value.trim();
    let studentId = document.getElementById("studentId").value.trim();

    // 非空验证
    if (name === "" || studentId === "") {
        alert("姓名和学号不能为空！");
        return false;
    }

    // 用户名/密码格式验证（复用登录表单的正则）
    return checkLoginForm();
}

// 3. 验证改用户名表单（新用户名格式）
function checkUsernameForm() {
    let newUsername = document.getElementById("newUsername").value.trim();
    let regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d.*\d)(?=.*[a-zA-Z].*[a-zA-Z]).{8,}$/;

    if (!regex.test(newUsername)) {
        alert("新用户名格式错误（≥8字符，含2字母、2数字、1大小写）！");
        return false;
    }

    return true;
}

// 4. 验证改密码表单（新密码格式+确认密码一致）
function checkPasswordForm() {
    let oldPwd = document.getElementById("oldPwd").value.trim();
    let newPwd = document.getElementById("newPwd").value.trim();
    let confirmPwd = document.getElementById("confirmPwd").value.trim();
    let regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d.*\d)(?=.*[a-zA-Z].*[a-zA-Z]).{8,}$/;

    // 非空验证
    if (oldPwd === "" || newPwd === "" || confirmPwd === "") {
        alert("所有密码项不能为空！");
        return false;
    }

    // 新密码格式验证
    if (!regex.test(newPwd)) {
        alert("新密码格式错误（≥8字符，含2字母、2数字、1大小写）！");
        return false;
    }

    // 新密码与确认密码一致性验证
    if (newPwd !== confirmPwd) {
        alert("新密码与确认密码不一致！");
        return false;
    }

    return true;
}